/usr/local/bin/python3.12 /private/var/www/github/Arthur-AiEra/LLM-Lab/B08_Advanced-RAG/CASE-知识库处理/2-对话知识沉淀.py
=== 对话知识提取与沉淀示例（迪士尼主题乐园） ===

示例1: 从单次对话中提取知识
对话内容:

用户: "我想去上海迪士尼乐园玩，门票多少钱？"
AI: "上海迪士尼乐园的门票价格根据日期有所不同。平日成人票价为399元，周末和节假日为499元。儿童票（1.0-1.4米）平日为299元，周末为374元。1.0米以下儿童免费。"
用户: "需要提前预订吗？"
AI: "建议提前预订，特别是周末和节假日，可以通过官方网站或第三方平台预订。"
用户: "从浦东机场怎么去？"
AI: "从浦东机场到迪士尼乐园可以乘坐地铁2号线到广兰路站，然后换乘11号线到迪士尼站，全程约1小时。也可以打车，约40分钟。"


提取的知识点:
  1. 类型: 事实
     内容: 上海迪士尼乐园平日成人票价为399元，周末和节假日为499元。
     置信度: 0.95
     分类: 门票信息
  2. 类型: 事实
     内容: 儿童票（1.0-1.4米）平日为299元，周末为374元；1.0米以下儿童免费。
     置信度: 0.95
     分类: 门票信息
  3. 类型: 需求
     内容: 用户希望了解上海迪士尼乐园的门票价格、预订方式及从浦东机场前往的交通方式。
     置信度: 0.98
     分类: 用户需求
  4. 类型: 流程
     内容: 从浦东机场到上海迪士尼乐园可乘坐地铁2号线到广兰路站，换乘11号线到迪士尼站，全程约1小时。
     置信度: 0.9
     分类: 出行指南
  5. 类型: 流程
     内容: 建议提前通过官方网站或第三方平台预订门票，尤其在周末和节假日。
     置信度: 0.92
     分类: 购票流程
  6. 类型: 注意
     内容: 周末和节假日门票价格更高，且建议提前预订以避免现场排队或售罄。
     置信度: 0.9
     分类: 购票提醒

对话摘要: 用户咨询上海迪士尼乐园门票价格、预订方式及从浦东机场前往的交通方案。AI提供了详细的票价信息、推荐预订渠道以及两种交通方式（地铁和打车）及其时间预估。
用户意图: 获取上海迪士尼乐园游玩相关信息，包括门票价格、预订建议和交通路线，以便规划行程。

============================================================

示例2: 批量提取知识
正在处理对话 1/3...
正在处理对话 2/3...
正在处理对话 3/3...
总共提取了 22 个知识点

所有知识点:
  事实:上海迪士尼乐园平日成人票价为399元，周末和节假日为499元。: 1次
  事实:儿童票（1.0-1.4米）平日为299元，周末为374元；1.0米以下儿童免费。: 1次
  需求:用户希望了解上海迪士尼乐园的门票价格及前往方式。: 1次
  流程:从浦东机场到迪士尼乐园可乘坐地铁2号线到广兰路站，换乘11号线至迪士尼站，全程约1小时。: 1次
  流程:从浦东机场打车前往迪士尼乐园约需40分钟。: 1次
  注意:建议提前预订门票，特别是周末和节假日，以确保入园资格。: 1次
  事实:上海迪士尼乐园通常每天开放，营业时间为上午8:00至晚上8:00。: 1次
  事实:人流量会因日期、季节和活动而变化，周末、节假日和寒暑假通常人较多。: 1次
  事实:上海迪士尼乐园的必玩项目包括：创极速光轮（明日世界）、七个小矮人矿山车（梦幻世界）、加勒比海盗：战争: 1次
  需求:用户希望了解迪士尼乐园当天是否开放、当前人流量情况以及推荐游玩项目。: 1次
  流程:建议用户出发前查看上海迪士尼官方网站或APP确认营业时间，并通过官方APP或社交媒体获取实时人流量信: 1次
  注意:营业时间可能因特殊活动或维护调整，建议出行前再次确认。: 1次
  事实:上海迪士尼乐园停车场收费为100元/天。: 1次
  事实:部分游乐项目有身高限制，需注意儿童是否符合要求。: 1次
  事实:可以携带密封包装的零食和水进入乐园，但禁止带玻璃瓶和酒精饮料。: 1次
  流程:建议下载官方APP查看实时排队时间，以优化游玩体验。: 1次
  流程:可租用婴儿车，适合带小孩家庭使用。: 1次
  需求:用户希望了解带小孩去迪士尼时需要特别注意的事项，包括安全、便利性、饮食等。: 1次
  问题:用户询问停车费如何收取？: 1次
  问题:用户询问是否可以携带食物进入乐园？: 1次
  注意:建议提前到达停车场，因为可能满位；也可选择地铁出行（11号线迪士尼站）。: 1次
  注意:园内餐饮价格较高，建议自备适量零食和水。: 1次

============================================================

示例3: 合并相似知识
过滤前知识点数量: 22
过滤后知识点数量: 17
过滤掉的'需求'和'问题'类型知识点: 5
合并后剩余 3 个知识点

合并后的知识点:
  1. 类型: 事实
     内容: 上海迪士尼乐园门票价格为：成人票平日399元，周末及节假日499元；儿童票（身高1.0-1.4米）平日299元，周末374元，1.0米以下儿童免费。园区通常每日开放，营业时间为上午8:00至晚上8:00，但人流量受日期、季节和活动影响，周末、节假日及寒暑假期间人流较多。必玩项目包括创极速光轮（明日世界）、七个小矮人矿山车（梦幻世界）、加勒比海盗：战争之潮（宝藏湾）和翱翔·飞越地平线（探险岛）。入园规则方面，部分游乐项目设有身高限制，需注意儿童是否符合要求；可携带密封包装的零食和水进入乐园，但禁止携带玻璃瓶及酒精饮料。此外，园区停车场收费为100元/天。
     频率: 8次
     置信度: 1.0
     分类: 综合信息
     关键词: ['上海迪士尼', '门票价格', '成人票', '儿童票', '身高限制', '营业时间', '人流量', '节假日', '必玩项目', '游玩推荐', '停车费', '食物携带', '入园规则']
     来源: ['AI']

  2. 类型: 流程
     内容: 从浦东机场前往上海迪士尼乐园，可选择地铁或打车两种交通方式：地铁路线为乘坐2号线至广兰路站，换乘11号线直达迪士尼站，全程约1小时；打车约需40分钟，具体时间视路况而定。建议出发前通过上海迪士尼官方网站或官方APP查询营业时间，并获取实时人流量和排队信息，以优化游玩体验。此外，游客可下载官方APP查看实时排队时间，合理安排游玩顺序；园区提供婴儿车租赁服务，适合带小孩的家庭使用。
     频率: 5次
     置信度: 0.9
     分类: 交通指南与游玩准备
     关键词: ['地铁路线', '交通方式', '时间预估', '查询方式', '官方APP', '实时信息', '排队时间', '婴儿车', '租赁', '浦东机场']
     来源: ['AI']

  3. 类型: 注意
     内容: 建议提前预订门票，尤其在周末和节假日期间，以确保入园资格；出行前请再次确认营业时间，因特殊活动或维护可能导致调整；为避免停车场满位，建议提前到达或选择地铁出行（11号线迪士尼站）；园内餐饮价格较高，建议自备适量零食和水以节省开支。
     频率: 4次
     置信度: 0.95
     分类: 综合提醒
     关键词: ['提前预订', '节假日', '购票建议', '营业时间变动', '特殊活动', '维护', '交通', '提前到达', '餐饮价格', '自备食物']
     来源: ['AI']


============================================================


Process finished with exit code 0
