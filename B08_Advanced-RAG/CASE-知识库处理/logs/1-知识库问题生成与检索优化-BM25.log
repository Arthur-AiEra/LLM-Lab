/usr/local/bin/python3.12 /private/var/www/github/Arthur-AiEra/LLM-Lab/B08_Advanced-RAG/CASE-知识库处理/1-知识库问题生成与检索优化-BM25.py
=== 知识库问题生成与检索优化示例（BM25版本）- 迪士尼主题乐园 ===

示例1: 为知识切片生成多样化问题
知识内容: 上海迪士尼乐园位于上海市浦东新区，是中国大陆首座迪士尼主题乐园，于2016年6月16日开园。乐园占地面积390公顷，包含七大主题园区：米奇大街、奇想花园、探险岛、宝藏湾、明日世界、梦幻世界和迪士尼小镇。

生成的5个问题:
  1. 上海迪士尼乐园是什么时候开园的？ (类型: 直接问, 难度: 简单)
  2. 中国大陆第一座迪士尼主题乐园在哪里？ (类型: 间接问, 难度: 简单)
  3. 相比其他迪士尼乐园，上海迪士尼有什么独特之处？ (类型: 对比问, 难度: 中等)
  4. 如果想了解上海迪士尼的园区构成，可以告诉我有哪些主题区吗？ (类型: 条件问, 难度: 中等)
  5. 上海迪士尼乐园占地多少公顷？它包含哪些主要区域？ (类型: 直接问, 难度: 简单)

============================================================

示例2: 生成更多样化的问题（8个）

生成的8个多样化问题:
  1. 上海迪士尼乐园是在哪一年开园的？
     类型: 直接问, 难度: 简单, 角度: 时间维度, 能否回答: True, 回答的答案：2016年
  2. 如果有人想体验中国大陆首座迪士尼乐园，他们应该去哪里？
     类型: 条件问, 难度: 简单, 角度: 游客决策角度, 能否回答: True, 回答的答案：上海迪士尼乐园
  3. 上海迪士尼乐园和香港迪士尼乐园相比，哪个更早建成？
     类型: 对比问, 难度: 中等, 角度: 地域比较角度, 能否回答: True, 回答的答案：上海迪士尼乐园更早建成，因为它于2016年开园，而香港迪士尼乐园于2005年开园
  4. 假设你计划去上海迪士尼乐园游玩，你可能会参观哪些主题园区？
     类型: 假设问, 难度: 中等, 角度: 游客规划角度, 能否回答: True, 回答的答案：米奇大街、奇想花园、探险岛、宝藏湾、明日世界、梦幻世界和迪士尼小镇
  5. 为什么说上海迪士尼乐园是中国大陆首座迪士尼主题乐园？
     类型: 推理问, 难度: 困难, 角度: 定义与逻辑角度, 能否回答: True, 回答的答案：因为它是中华人民共和国境内第一座建成并运营的迪士尼主题乐园，之前没有其他迪士尼乐园在中国大陆设立
  6. 上海迪士尼乐园占地多少公顷？
     类型: 直接问, 难度: 简单, 角度: 空间维度, 能否回答: True, 回答的答案：390公顷
  7. 你能从知识中推断出上海迪士尼乐园的规模吗？
     类型: 推理问, 难度: 中等, 角度: 规模判断角度, 能否回答: True, 回答的答案：可以，它占地面积达390公顷，并包含七大主题园区，说明其规模较大且内容丰富
  8. 如果你在浦东新区，怎么才能找到上海迪士尼乐园？
     类型: 间接问, 难度: 简单, 角度: 地理位置指引角度, 能否回答: True, 回答的答案：上海迪士尼乐园位于上海市浦东新区，因此只要前往浦东新区即可找到

============================================================

示例3: 评估两种检索方法的准确度
正在为知识库生成问题...
为知识库生成问题完毕
正在构建知识库索引...
Building prefix dict from the default dictionary ...
Loading model from cache /var/folders/wj/zmnkhh052rqbkwrpy5jtfrc40000gn/T/jieba.cache
Loading model cost 0.265 seconds.
Prefix dict has been built successfully.
原文索引构建完成，共索引 8 个知识切片
问题索引构建完成，共索引 40 个问题
question_bm25= <rank_bm25.BM25Okapi object at 0x121291ee0>
question_bm25= <rank_bm25.BM25Okapi object at 0x121291ee0>
question_bm25= <rank_bm25.BM25Okapi object at 0x121291ee0>
测试查询数量: 3
BM25原文检索准确率: 66.7%
BM25问题检索准确率: 100.0%
问题检索改进的查询数量: 1

=== 详细分析 ===

问题检索方法表现更好的查询（按分数差异排序）:
  1. 查询: 如果我想体验最刺激的过山车，应该去哪个区域？
     原文检索分数: 0.155
     问题检索分数: 1.000
     分数差异: +0.845
     原文检索: ✗
     问题检索: ✓
  2. 查询: 什么时间去人比较少？
     原文检索分数: 0.168
     问题检索分数: 0.375
     分数差异: +0.207
     原文检索: ✓
     问题检索: ✓
  3. 查询: 可以带食物进去吗？
     原文检索分数: 0.153
     问题检索分数: 0.265
     分数差异: +0.112
     原文检索: ✓
     问题检索: ✓

原文检索方法表现更好的查询:

Process finished with exit code 0
